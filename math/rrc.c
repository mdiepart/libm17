//--------------------------------------------------------------------
// M17 C library - math/rrc.c
//
// Wojciech Kaczmarski, SP5WWP
// M17 Project, 29 December 2023
//--------------------------------------------------------------------
#include <m17.h>

// RRC Filter for 96 kHz sample rate
// alpha=0.5, span=8, sps=20, gain=sqrt(sps)
const float rrc_taps_20[8*20+1] = 
{
-0.002223795436133338f, -0.002258562030850857f, -0.002165191659582787f, -0.001940925054641284f,
-0.001590061429387669f, -0.001124098247971356f, -0.000561489178725134f,  0.000072986395428971f,
 0.000749228836822979f,  0.001433164849238003f,  0.002088381783765276f,  0.002677978438456125f,
 0.003166546138899426f,  0.003522182572779720f,  0.003718433964702327f,  0.003736059273378167f,
 0.003564513502570597f,  0.003203056021223239f,  0.002661403804300452f,  0.001959868285974094f,
 0.001128937358501837f,  0.000208290020837195f, -0.000754740846091241f, -0.001707213399497108f,
-0.002593057208989781f, -0.003355890813367709f, -0.003942055550078388f, -0.004303726757621754f,
-0.004401951199437721f, -0.004209453908864684f, -0.003713059198443574f, -0.002915579589649612f,
-0.001837042838958750f, -0.000515150652117307f,  0.000995107663336867f,  0.002622728531882198f,
 0.004282857720736837f,  0.005879806665602678f,  0.007310842635900604f,  0.008470633939519370f,
 0.009256194694322978f,  0.009572142063156937f,  0.009336053896165064f,  0.008483697849890306f,
 0.006973895352777105f,  0.004792785992855719f,  0.001957270338105298f, -0.001482568250839778f,
-0.005442230152061396f, -0.009802881030254906f, -0.014412827249051886f, -0.019090410765932563f,
-0.023628292538358159f, -0.027799035775521820f, -0.031361843944420778f, -0.034070255674238777f,
-0.035680551908776614f, -0.035960591958462185f, -0.034698766347739357f, -0.031712737022367654f,
-0.026857630620506945f, -0.020033358677597850f, -0.011190759859969880f, -0.000336293101214946f,
 0.012464944182369120f,  0.027088043320100185f,  0.043349064246229967f,  0.061007806136395594f,
 0.079772534825044220f,  0.099306560540135216f,  0.119236489534289961f,  0.139161908524203820f,
 0.158666204080632339f,  0.177328172567169262f,  0.194734041856030576f,  0.210489505338799121f,
 0.224231362657611233f,  0.235638370493727795f,  0.244440930460285671f,  0.250429278860985316f,
 0.253459893444308748f,  0.253459893444308748f,  0.250429278860985316f,  0.244440930460285671f,
 0.235638370493727795f,  0.224231362657611233f,  0.210489505338799121f,  0.194734041856030576f,
 0.177328172567169262f,  0.158666204080632339f,  0.139161908524203820f,  0.119236489534289961f,
 0.099306560540135216f,  0.079772534825044220f,  0.061007806136395594f,  0.043349064246229967f,
 0.027088043320100185f,  0.012464944182369120f, -0.000336293101214946f, -0.011190759859969880f,
-0.020033358677597850f, -0.026857630620506945f, -0.031712737022367654f, -0.034698766347739357f,
-0.035960591958462185f, -0.035680551908776614f, -0.034070255674238777f, -0.031361843944420778f,
-0.027799035775521820f, -0.023628292538358159f, -0.019090410765932563f, -0.014412827249051886f,
-0.009802881030254906f, -0.005442230152061396f, -0.001482568250839778f,  0.001957270338105298f,
 0.004792785992855719f,  0.006973895352777105f,  0.008483697849890306f,  0.009336053896165064f,
 0.009572142063156937f,  0.009256194694322978f,  0.008470633939519370f,  0.007310842635900604f,
 0.005879806665602678f,  0.004282857720736837f,  0.002622728531882198f,  0.000995107663336867f,
-0.000515150652117307f, -0.001837042838958750f, -0.002915579589649612f, -0.003713059198443574f,
-0.004209453908864684f, -0.004401951199437721f, -0.004303726757621754f, -0.003942055550078388f,
-0.003355890813367709f, -0.002593057208989781f, -0.001707213399497108f, -0.000754740846091241f,
 0.000208290020837195f,  0.001128937358501837f,  0.001959868285974094f,  0.002661403804300452f,
 0.003203056021223239f,  0.003564513502570597f,  0.003736059273378167f,  0.003718433964702327f,
 0.003522182572779720f,  0.003166546138899426f,  0.002677978438456125f,  0.002088381783765276f,
 0.001433164849238003f,  0.000749228836822979f,  0.000072986395428971f, -0.000561489178725134f,
-0.001124098247971356f, -0.001590061429387669f, -0.001940925054641284f, -0.002165191659582787f,
-0.002258562030850857f
};

//sample RRC filter for 48kHz sample rate
//alpha=0.5, span=8, sps=10, gain=sqrt(sps)
const float rrc_taps_10[8*10+1]=
{
	-0.003195702904062073f, -0.002930279157647190f, -0.001940667871554463f,
	-0.000356087678023658f,  0.001547011339077758f,  0.003389554791179751f,
	 0.004761898604225673f,  0.005310860846138910f,  0.004824746306020221f,
	 0.003297923526848786f,  0.000958710871218619f, -0.001749908029791816f,
	-0.004238694106631223f, -0.005881783042101693f, -0.006150256456781309f,
	-0.004745376707651645f, -0.001704189656473565f,  0.002547854551539951f,
	 0.007215575568844704f,  0.011231038205363532f,  0.013421952197060707f,
	 0.012730475385624438f,  0.008449554307303753f,  0.000436744366018287f,
	-0.010735380379191660f, -0.023726883538258272f, -0.036498030780605324f,
	-0.046500883189991064f, -0.050979050575999614f, -0.047340680079891187f,
	-0.033554880492651755f, -0.008513823955725943f,  0.027696543159614194f,
	 0.073664520037517042f,  0.126689053778116234f,  0.182990955139333916f,
	 0.238080025892859704f,  0.287235637987091563f,  0.326040247765297220f,
	 0.350895727088112619f,  0.359452932027607974f,  0.350895727088112619f,
	 0.326040247765297220f,  0.287235637987091563f,  0.238080025892859704f,
	 0.182990955139333916f,  0.126689053778116234f,  0.073664520037517042f,
	 0.027696543159614194f, -0.008513823955725943f, -0.033554880492651755f,
	-0.047340680079891187f, -0.050979050575999614f, -0.046500883189991064f,
	-0.036498030780605324f, -0.023726883538258272f, -0.010735380379191660f,
	 0.000436744366018287f,  0.008449554307303753f,  0.012730475385624438f,
	 0.013421952197060707f,  0.011231038205363532f,  0.007215575568844704f,
	 0.002547854551539951f, -0.001704189656473565f, -0.004745376707651645f,
	-0.006150256456781309f, -0.005881783042101693f, -0.004238694106631223f,
	-0.001749908029791816f,  0.000958710871218619f,  0.003297923526848786f,
	 0.004824746306020221f,  0.005310860846138910f,  0.004761898604225673f,
	 0.003389554791179751f,  0.001547011339077758f, -0.000356087678023658f,
	-0.001940667871554463f, -0.002930279157647190f, -0.003195702904062073f
};

//sample RRC filter for 24kHz sample rate
//alpha=0.5, span=8, sps=5, gain=sqrt(sps)
const float rrc_taps_5[8*5+1]=
{
	-0.004519384154389f, -0.002744505321971f,
	 0.002187793653660f,  0.006734308458208f,
	 0.006823188093192f,  0.001355815246317f,
	-0.005994389201970f, -0.008697733303330f,
	-0.002410076268276f,  0.010204314627992f,
	 0.018981413448435f,  0.011949415510291f,
	-0.015182045838927f, -0.051615756197679f,
	-0.072094910038768f, -0.047453533621088f,
	 0.039168634270669f,  0.179164496628150f,
	 0.336694345124862f,  0.461088271869920f,
	 0.508340710642860f,  0.461088271869920f,
	 0.336694345124862f,  0.179164496628150f,
	 0.039168634270669f, -0.047453533621088f,
	-0.072094910038768f, -0.051615756197679f,
	-0.015182045838927f,  0.011949415510291f,
	 0.018981413448435f,  0.010204314627992f,
	-0.002410076268276f, -0.008697733303330f,
	-0.005994389201970f,  0.001355815246317f,
	 0.006823188093192f,  0.006734308458208f,
	 0.002187793653660f, -0.002744505321971f,
	-0.004519384154389f
};
